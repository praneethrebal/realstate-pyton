<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Listing</title>

    <style>
/* ---------------------------------------------------- */
/*                      GLOBAL                          */
/* ---------------------------------------------------- */
body {
    margin: 0;
    padding: 0;
    font-family: "Poppins", sans-serif;
    background: #eef2f7;
}

/* ---------------------------------------------------- */
/*                DESKTOP LAYOUT                        */
/* ---------------------------------------------------- */
.main-layout {
    display: flex;
    gap: 35px;
    width: 92%;
    margin: 100px auto 40px auto;
}

/* LEFT FILTER PANEL */
.filter-box {
    width: 27%;
    background: white;
    padding: 28px;
    border-radius: 16px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    position: sticky;
    top: 30px;
    border: 1px solid #ececec;
    animation: slideLeft 0.4s ease;
}

.filter-box h3 {
    margin-bottom: 22px;
    font-size: 22px;
    font-weight: 700;
}

.field {
    margin-bottom: 18px;
}

label {
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
    color: #333;
}

input, select {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 15px;
    background: #fafafa;
}

.price-row {
    display: flex;
    gap: 12px;
}

.apply, .reset {
    padding: 12px;
    border-radius: 10px;
    border: none;
    font-size: 15px;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
}

.apply { background: #0d6efd; color: white; }
.reset { background: #e3e3e3; color: #333; }

/* RIGHT PROPERTY LIST */
.right-list {
    width: 73%;
}

/* PROPERTY CARD */
.card-container {
    display: flex;
    gap: 22px;
    padding: 22px;
    border: 1px solid #e3e3e3;
    margin-bottom: 28px;
    border-radius: 16px;
    background: #ffffff;
    box-shadow: 0 6px 18px rgba(0,0,0,0.10);
    transition: 0.25s ease;
}

.card-container:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.left img {
    width: 330px;
    height: 210px;
    object-fit: cover;
    border-radius: 14px;
    border: 1px solid #ddd;
}

.right h4 {
    font-size: 15px;
    color: #888;
    margin-bottom: 4px;
}

.right h2 {
    margin-top: 0;
    font-size: 24px;
    color: #333;
    font-weight: 700;
}

.right p {
    margin: 7px 0;
    font-size: 16px;
    color: #444;
}

/* ACTION BUTTONS */
.action-buttons {
    margin-top: 15px;
    display: flex;
    gap: 12px;
}

.action-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 6px 10px;
    font-size: 20px;
    border-radius: 8px;
}

/* ---------------------------------------------------- */
/*                 MOBILE RESPONSIVE                    */
/* ---------------------------------------------------- */
@media (max-width: 768px) {

    .main-layout {
        flex-direction: column;
        width: 100%;
        padding: 10px;
        margin-top: 80px;
    }

    .filter-box {
        width: 100%;
        position: static;
    }

    .right-list {
        width: 100%;
    }

    .card-container {
        flex-direction: column;
        padding: 15px;
    }

    .left img {
        width: 100%;
        height: 200px;
    }

    .right h2 {
        font-size: 20px;
    }

    .right p {
        font-size: 14px;
    }

    .action-buttons {
        flex-wrap: wrap;
        gap: 10px;
    }

    .action-btn {
        font-size: 16px;
        padding: 12px;
        background: #0d6efd;
        color: white;
        width: 100%;
        border-radius: 10px;
    }

            .footer {
    display: none !important;
}
   
}
    </style>
</head>

<body>

{% include 'NavBar.html' %}

<div class="main-layout">
<!-- MOBILE FILTER TOGGLE BUTTON (SHOW ON MOBILE ONLY) -->
<button class="filter-toggle-btn" onclick="toggleFilters()">‚ò∞ Filters</button>

<div class="filter-box">
    <h3>Filters</h3>


        <form method="GET" id="filter-form">

            <div class="field">
                <label>Location</label>
                <input type="text" name="location" placeholder="Enter location" value="{{ request.GET.location }}">
            </div>

            <div class="field">
                <label>Verified</label>
                <select name="verified">
                    <option value="">All</option>
                    <option value="1" {% if request.GET.verified == '1' %}selected{% endif %}>Verified</option>
                    <option value="0" {% if request.GET.verified == '0' %}selected{% endif %}>Unverified</option>
                </select>
            </div>

            <div class="field">
                <label>Price range</label>
                <div class="price-row">
                    <input type="text" name="min_price" placeholder="Min ‚Çπ" value="{{ request.GET.min_price }}">
                    <input type="text" name="max_price" placeholder="Max ‚Çπ" value="{{ request.GET.max_price }}">
                </div>
            </div>

            <div class="field">
                <label>Road Facing</label>
                <select name="road">
                    <option value="">All</option>
                    <option>North</option>
                    <option>South</option>
                    <option>East</option>
                    <option>West</option>
                </select>
            </div>

            <div class="field">
                <label>Look (Sell / Rent)</label>
                <select name="look">
                    <option value="">All</option>
                    <option>Sell</option>
                    <option>Rent</option>
                </select>
            </div>

            <button class="apply" type="submit">Apply</button>
            <a href="{{ request.path }}" class="reset" style="display:block;text-align:center;text-decoration:none;">Reset</a>

        </form>
    </div>

    <!-- RIGHT LIST -->
    <div class="right-list">

        {% for item in data %}
        <div class="card-container">

            <!-- IMAGE -->
            <div class="left">
                {% if item.image %}
                    <img src="{{ item.image.url }}">
                {% else %}
                    <img src="/static/no-image.png">
                {% endif %}
            </div>

            <!-- DETAILS -->
            <div class="right">
                <a href="{% url 'prop:property_detail' item.id %}" style="color:inherit; text-decoration:none;">
                    <h4>OWNER</h4>
                    <h2>{{ item.user }}</h2>

                    <p>üìç {{ item.location }}</p>
                    <p>üôç {{ item.selectProperty }}</p>
                    <p>üí∞ ‚Çπ{{ item.price }}</p>
                    <p>üî• {{ item.description }}</p>
                </a>

                <!-- ACTION BUTTONS -->
                <div class="action-buttons">
                    <button class="action-btn">üìû</button>
                    <button class="action-btn">üîó</button>

                    <!-- SAVE BUTTON -->
                    <button class="action-btn" onclick="toggleSave({{ item.id }}, this)">üíæ</button>
                </div>

            </div>

        </div>
        {% endfor %}

    </div>

</div>

<style>
         /* ---------- FOOTER ---------- */
.footer {
    font-family: 'Poppins', sans-serif;
    background: #fff;
    color: #333;
}

.footer-main {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    max-width: 1200px;
    margin: auto;
    padding: 50px 20px;
    gap: 40px;
}

.footer-section {
    flex: 1;
    min-width: 230px;
}

.footer-section h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 12px;
}

.footer-section p {
    font-size: 14px;
    color: #555;
    margin-bottom: 10px;
    line-height: 1.6;
}

.footer-section a {
    color: #333;
    text-decoration: none;
}

.footer-section a:hover {
    text-decoration: underline;
}

.footer-section button {
    background: #888;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 8px 18px;
    font-size: 14px;
    cursor: pointer;
    transition: 0.3s;
}

.footer-section button:hover {
    background: #555;
}

.search-box {
    display: flex;
    align-items: center;
    gap: 8px;
}

.search-box input {
    width: 200px;
    padding: 10px 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    outline: none;
    font-size: 14px;
    transition: all 0.3s ease;
}

.search-box input:focus {
    border-color: #0056d2;
    box-shadow: 0 0 4px rgba(0, 86, 210, 0.3);
}

.search-box button {
    background-color: #666;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 10px 16px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.search-box button:hover {
    background-color: #0056d2;
}

.social-icons a {
    font-size: 18px;
    color: #444;
    margin-right: 12px;
    transition: color 0.3s;
}

.social-icons a:hover {
    color: #0a66c2;
}

.footer-section ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-section ul li {
    margin-bottom: 6px;
}

.footer-section ul li a {
    font-size: 14px;
}

.footer-bottom {
    background: #0056d2;
    color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    padding: 15px 40px;
    font-size: 14px;
}

.footer-bottom span {
    font-weight: 600;
}


/* MOBILE FILTER TOGGLE BUTTON */
.filter-toggle-btn {
    display: none;
    background: #0d6efd;
    color: white;
    padding: 14px;
    width: 100%;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    margin-bottom: 15px;
    cursor: pointer;
}

@media (max-width: 768px) {
    .filter-toggle-btn {
        display: block;
    }

    .filter-box {
        display: none;
        animation: fadeIn 0.3s ease-in-out;
    }

    .filter-box.open {
        display: block !important;
    }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

</style>
<br><br><br>
 <footer class="footer">
  <div class="footer-main">
      <div class="footer-section">
          <h3>SEARCH</h3>
          <div class="search-box">
              <input type="text" placeholder="Search For State">
              <button type="button">Search</button>
          </div>
      </div>

      <div class="footer-section">
          <h3>FIND PROPERTY</h3>
          <p>Select From Thousands Of Options, Without Brokerage.</p>
          <button>Enquiry Now</button>

          <h3 style="margin-top:25px;">LIST YOUR PROPERTY</h3>
          <p>For Free. Without Any Brokerage.</p>
          <button>Post Now</button>
      </div>

      <div class="footer-section">
          <h3>CONTACT US</h3>
          <p>Toll Free - 1800 41 99099</p>
          <p>9:30 AM To 6:30 PM (Mon-Sun)</p>
          <p>Email - <a href="mailto:feedback@propertysr.com">feedback@propertysr.com</a></p>

          <h3 style="margin-top:20px;">FOLLOW US</h3>
          <div class="social-icons">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
      </div>

      <div class="footer-section">
          <h3>COMPANY</h3>
          <ul>
              <li><a href="#">Careers</a></li>
              <li><a href="#">About Us</a></li>
              <li><a href="#">For Partners</a></li>
              <li><a href="#">Terms</a></li>
              <li><a href="#">Annual Return</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Contact Us</a></li>
              <li><a href="#">Unsubscribe</a></li>
              <li><a href="#">Merger Hearing Advertisement</a></li>
          </ul>
      </div>
  </div>

  <div class="footer-bottom">
       <p>¬©<span>WEEKDAYS PROPERTIES</span>, All Rights Reserved.</p>
      <p>Designed By <span> YGR GOBAL IT SERVICES Pvt. Ltd,2023.</span></p>
  </div>
</footer>

<script>

// SAVE PROPERTY AJAX
function toggleSave(id, btn) {
    fetch(`/save/${id}/`)
        .then(res => res.json())
        .then(data => {
            if (data.status === "saved") {
                btn.textContent = "‚ù§";
            } else {
                btn.textContent = "üíæ";
            }
        });
}



// FILTER AJAX
document.addEventListener("DOMContentLoaded", function () {

    const filterForm = document.getElementById("filter-form");
    const rightList = document.querySelector(".right-list");

    if (filterForm) {
        filterForm.addEventListener("submit", function (event) {
            event.preventDefault();

            const formData = new FormData(filterForm);
            const params = new URLSearchParams(formData);

            const fetchUrl = `${window.location.pathname}?${params.toString()}`;

            fetch(fetchUrl)
                .then(response => response.text())
                .then(html => {

                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, "text/html");

                    const newRightList = doc.querySelector(".right-list");

                    if (newRightList) {
                        rightList.innerHTML = newRightList.innerHTML;
                    } else {
                        rightList.innerHTML = "<p>No properties found</p>";
                    }
                });
        });

        // RESET AJAX
        const resetButton = filterForm.querySelector(".reset");
        if (resetButton) {
            resetButton.addEventListener("click", function (event) {
                event.preventDefault();
                filterForm.reset();
                filterForm.dispatchEvent(new Event("submit"));
            });
        }
    }
});




// MOBILE FILTER TOGGLE
function toggleFilters() {
    const fb = document.querySelector(".filter-box");
    const btn = document.querySelector(".filter-toggle-btn");

    fb.classList.toggle("open");

    if (fb.classList.contains("open")) {
        btn.textContent = "‚úñ Close";
    } else {
        btn.textContent = "‚ò∞ Filters";
    }
}

</script>



</body>
</html>