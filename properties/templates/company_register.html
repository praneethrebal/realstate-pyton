{% load static %}

<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Company Register</title>

    <style>
      body {
        background: #eef1f6;
        margin: 0;
        font-family: "Poppins", sans-serif;
      }

      /* MAIN CARD */
      .container {
        max-width: 400px;
        margin: 40px auto;
        background: #fff;
        padding: 25px 30px;
        border-radius: 14px;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.08);
      }

      /* Title */
      .title {
        text-align: center;
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 15px;
      }

      /* Wallpaper */
      .wallpaper-center {
        text-align: center;
        margin-bottom: 15px;
      }
      .wallpaper-preview {
        width: 100%;
        height: 160px;
        border-radius: 12px;
        background-size: cover;
        background-position: center;
        border: 1px solid #ddd;
      }
      .upload-btn-wall {
        margin-top: 10px;
        display: inline-block;
        background: #2563eb;
        padding: 7px 16px;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
      }
      #id_wallpaper {
        display: none;
      }

      /* Logo */
      .logo-center {
        text-align: center;
        display: flex;
        flex-direction: column-reverse;
        align-items: center;
      }
      .logo-preview {
        width: 95px;
        height: 95px;
        border-radius: 50%;
        background: #eee;
        border: 4px solid white;
        background-size: cover;
        background-position: center;
        display: inline-block;
        cursor: pointer;
        margin-bottom: 10px;
      }
      .upload-btn-logo {
        display: inline-block;
        background: #2563eb;
        padding: 6px 16px;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
      }
      #id_logo {
        display: none;
      }

      /* Inputs */
      input,
      textarea,
      select {
        width: 95%;
        padding: 12px;
        margin-bottom: 14px;
        border-radius: 10px;
        border: 1px solid #dcdcdc;
        background: #fafafa;
        font-size: 14px;
      }
      input:focus,
      textarea:focus,
      select:focus {
        background: #fff;
        border-color: #2669ff;
      }

      /* PLAN BUTTONS */
      .plan-box {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }
      .plan-btn {
        width: 48%;
        padding: 12px 0;
        text-align: center;
        border-radius: 10px;
        cursor: pointer;
        color: #fff;
        font-weight: 600;
        font-size: 14px;
      }
      .blue-plan {
        background: #2669ff;
      }
      .red-plan {
        background: #d62828;
      }

      .selected-plan {
        outline: 3px solid #000;
      }

      /* Amount Box */
      .amount-box {
        background: #f3f4f6;
        padding: 12px;
        border-radius: 10px;
        margin-bottom: 18px;
        font-weight: 600;
      }

      /* Submit */
      .submit-btn {
        width: 100%;
        padding: 14px;
        background: #2669ff;
        color: white;
        border-radius: 10px;
        border: none;
        font-size: 17px;
        font-weight: 600;
        cursor: pointer;
      }

      .error-text {
        color: #d62828;
        font-size: 13px;
        margin-top: -10px;
        margin-bottom: 10px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h2 class="title">Company Register</h2>

      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %} {% if form.non_field_errors %}
        <div
          style="
            background: #ffe6e6;
            color: #b30000;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 15px;
          "
        >
          {{ form.non_field_errors }}
        </div>
        {% endif %}

        <!-- Wallpaper -->
        <div class="wallpaper-center">
          <div
            class="wallpaper-preview"
            id="wallPrev"
            style="
              background-image: url('https://cdn-icons-png.flaticon.com/512/847/847969.png');
            "
          ></div>

          <label class="upload-btn-wall" for="id_wallpaper"
            >Upload Wallpaper</label
          >
          {{ form.wallpaper }}
        </div>
        <div class="error-text">{{ form.wallpaper.errors }}</div>

        <!-- Logo -->
        <div class="logo-center">
          <label class="upload-btn-logo" for="id_logo">Upload Logo</label>

          <div
            class="logo-preview"
            id="logoPrev"
            style="
              background-image: url('https://cdn-icons-png.flaticon.com/512/847/847969.png');
            "
          ></div>

          {{ form.logo }}
        </div>
        <div class="error-text">{{ form.logo.errors }}</div>

        <!-- Fields -->
        <label>Username</label>
        {{ form.username }}
        <div class="error-text">{{ form.username.errors }}</div>

        <label>Email</label>
        {{ form.email }}
        <div class="error-text">{{ form.email.errors }}</div>

        <label>Password</label>
        {{ form.password1 }}
        <div class="error-text">{{ form.password1.errors }}</div>

        <label>Confirm Password</label>
        {{ form.password2 }}
        <div class="error-text">{{ form.password2.errors }}</div>

        <label>Company Name</label>
        {{ form.company_name }}
        <div class="error-text">{{ form.company_name.errors }}</div>

        <label>Description</label>
        {{ form.description }}
        <div class="error-text">{{ form.description.errors }}</div>

        <label>Experience</label>
        {{ form.experience }}
        <div class="error-text">{{ form.experience.errors }}</div>

        <label>Total Projects</label>
        {{ form.total_projects }}
        <div class="error-text">{{ form.total_projects.errors }}</div>

        <label>Ongoing Projects</label>
        {{ form.ongoing_projects }}
        <div class="error-text">{{ form.ongoing_projects.errors }}</div>

        <label>Completed Projects</label>
        {{ form.completed_projects }}
        <div class="error-text">{{ form.completed_projects.errors }}</div>

        <label>Address</label>
        {{ form.address }}
        <div class="error-text">{{ form.address.errors }}</div>

        <label>Contact Number</label>
        {{ form.contact_number }}
        <div class="error-text">{{ form.contact_number.errors }}</div>

        <!-- Plan -->
        <label>Choose Plan</label>
        <div class="plan-box">
          <div class="plan-btn blue-plan" onclick="selectPlan(14999, this)">
            ₹14999
          </div>
          <div class="plan-btn red-plan" onclick="selectPlan(19999, this)">
            ₹19999
          </div>
        </div>
        {{ form.plan }}
        <div class="error-text">{{ form.plan.errors }}</div>

        <!-- Duration -->
        <label>Duration (Months)</label>
        <select
          id="durationSelect"
          name="duration"
          onchange="updateAmount()"
          required
        >
          <option value="1">1 Month</option>
          <option value="3">3 Months</option>
          <option value="6">6 Months</option>
        </select>

        <!-- Amount -->
        <div class="amount-box">
          Total Amount: ₹ <span id="finalAmount">0</span>
        </div>

        <div class="check-box">
          <input type="checkbox" style="width: auto" required /> I accept the
          Terms & Conditions
        </div>

        <button class="submit-btn">Register</button>
      </form>
    </div>

    <script>
      let selectedPlanAmount = 0;

      document
        .getElementById("id_wallpaper")
        .addEventListener("change", (e) => {
          document.getElementById(
            "wallPrev"
          ).style.backgroundImage = `url(${URL.createObjectURL(
            e.target.files[0]
          )})`;
        });

      document.getElementById("id_logo").addEventListener("change", (e) => {
        document.getElementById(
          "logoPrev"
        ).style.backgroundImage = `url(${URL.createObjectURL(
          e.target.files[0]
        )})`;
      });

      function selectPlan(amount, elem) {
        selectedPlanAmount = amount;
        document.getElementById("id_plan").value = amount;

        document
          .querySelectorAll(".plan-btn")
          .forEach((btn) => btn.classList.remove("selected-plan"));

        elem.classList.add("selected-plan");

        updateAmount();
      }

      function updateAmount() {
        let months = document.getElementById("durationSelect").value;
        document.getElementById("finalAmount").innerText =
          selectedPlanAmount * months;
      }
    </script>
  </body>
</html>
