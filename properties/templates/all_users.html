{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="{% static '/css/all_users.css' %}" />

    <style>

           body {
            background: #f5f6fa;
            font-family: "Poppins", sans-serif;
            margin: 0;
        }

        /* ===== Container ===== */
        .container1 {
            width: 90%;
            margin: auto;
            padding: 20px;
        }

        /* Hide sections initially */
        .section {
            display: none;
        }

        /* Default Grid (4 columns desktop) */
        .grid,
        .scroll-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        /* ===== Card Style ===== */
        .card {
            background: #ffffff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: 0.3s;
            text-align: center;
        }

        /* Remove link underline */
        .card a {
            text-decoration: none;
            color: #222;
        }

        /* Circle Image */
        .profile-img,
        .pro-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            display: block;
            margin: 0 auto 15px auto;
        }

        /* Card details */
        .card-details {
            text-align: left;
            margin-top: 10px;
            font-size: 18px;
        }

        /* Contact Button */
        .btn {
            display: block;
            width: 90%;
            margin: 15px auto 0 auto;
            padding: 12px;
            text-align: center;
            background: rgb(84, 84, 151);
            color: white;
            font-size: 16px;
            border-radius: 10px;
            text-decoration: none;
            transition: 0.3s;
        }

        .btn:hover {
            background: #5a5a9d;
        }

        h2 {
            text-align: center;
            margin: 20px 0;
        }

        h3 {
            font-size: 20px;
        }

        /* ======= RESPONSIVE BREAKPOINTS ======= */
        @media (max-width: 1024px) {
            .grid,
            .scroll-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid,
            .scroll-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ======= MOBILE FIX ‚Äî ONE CARD PER ROW ======= */
        @media (max-width: 600px) {

            .grid,
            .scroll-grid {
                grid-template-columns: 1fr !important;
                gap: 20px;
                width: 100% !important;
            }

            .card {
                width: 95% !important;
                margin: 0 auto !important;
                padding: 18px !important;
                text-align: center !important;
            }

            .profile-img,
            .pro-img {
                width: 130px !important;
                height: 130px !important;
                margin: 0 auto 14px !important;
            }

            .card-details {
                text-align: center !important;
                margin-top: 10px;
                font-size: 17px !important;
            }

            h3 {
                font-size: 20px !important;
            }

            .btn {
                width: 95% !important;
                padding: 14px !important;
                font-size: 17px !important;
                border-radius: 10px;
            }

            h2 {
                font-size: 24px !important;
                text-align: center;
            }
        }
    </style> 
</head>

<body>

    {% include 'NavBar.html' %}

    <br><br><br><br>

    <div class="container1">

        <!-- ========== COMPANY SECTION ========== -->
        <div class="section" {% if category == 'company' %}style="display:block"{% endif %}>
            <h2>All Companies</h2>

            <div class="grid">
                {% for u in users %}
                <div class="card">
                    <a href="{% url 'user_detail' u.id %}">
                        <img src="{{ u.company_logo_path.url }}" class="profile-img">

                        <div class="card-details">
                            <h3>{{ u.username }}</h3>
                            <p class="location">üìç {{ u.location }}</p>
                            <p>Experience: {{ u.experience }} yrs</p>
                            <p><strong>Deals:</strong> {{ u.deals }}</p>
                        </div>
                    </a>

                    <a class="btn" href="tel:{{ u.contact_number }}">üìû Contact</a>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- ========== MARKETERS SECTION ========== -->
        <div class="section" {% if category == 'marketer' %}style="display:block"{% endif %}>
            <h2>All Marketing Experts</h2>

            <div class="grid">
                {% for u in users %}
                <div class="card">
                    <a href="{% url 'user_detail' u.id %}">
                        <img src="{{ u.profile_image_path.url }}" class="profile-img">

                        <div class="card-details">
                            <h3>{{ u.username }}</h3>
                            <p class="location">üìç {{ u.location }}</p>
                            <p>Experience: {{ u.experience }} yrs</p>
                            <p>Deals: {{ u.deals }}</p>
                        </div>
                    </a>

                    <a class="btn" href="tel:{{ u.contact_number }}">üìû Contact</a>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- ========== PROFESSIONALS SECTION ========== -->
        <div class="section" {% if category == 'professional' %}style="display:block"{% endif %}>
            <h2>All Construction Professionals</h2>

            <div class="grid">
                {% for u in users %}
                <div class="card">
                    <a href="{% url 'user_detail' u.id %}">
                        <img src="{{ u.profile_image_path.url }}" class="pro-img">

                        <div class="card-details">
                            <h3>{{ u.username }}</h3>
                            <p class="location">üìç {{ u.location }}</p>
                            <p>Category: {{ u.category }}</p>
                            <p>Experience: {{ u.experience }} yrs</p>
                        </div>
                    </a>

                    <a class="btn" href="tel:{{ u.contact_number }}">üìû Contact</a>
                </div>
                {% endfor %}
            </div>
        </div>

    </div>

</body>

</html>
