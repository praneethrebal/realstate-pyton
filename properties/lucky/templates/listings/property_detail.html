<!DOCTYPE html>
<html>
  <head>
    <title>{{ property.owner_name }}</title>
    <style>
      body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding: 15px;
        background: #f9f9f9;
        color: #333;
      }

      .page-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin: 20px auto;
        max-width: 1200px;
      }

      /* Property Details Card */
      .property-container {
        flex: 1 1 600px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
      }

      .property-container img {
        width: 100%;
        height: auto;
        max-height: 320px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 15px;
      }

      .property-container p {
        font-size: 15px;
        margin: 8px 0;
        line-height: 1.5;
      }

      .property-container strong {
        color: #222;
      }

      .property-container a.map-link {
        color: #007bff;
        text-decoration: none;
        font-weight: 500;
      }

      .property-container a.map-link:hover {
        text-decoration: underline;
      }

      .btn-buy {
        display: inline-block;
        text-align: center;
        background: #28a745;
        color: #fff;
        font-weight: 600;
        padding: 12px 25px;
        border-radius: 8px;
        text-decoration: none;
        margin-top: 15px;
        transition: background 0.3s;
      }

      .btn-buy:hover {
        background: #218838;
      }

      hr {
        border: none;
        border-top: 1px solid #eee;
        margin: 20px 0;
      }

      .note {
        margin-top: 20px;
        font-size: 16px;
        color: #d9534f; /* red for urgency */
        font-weight: 600;
        font-style: normal;
        background: #fff3cd;
        border: 1px solid #ffeeba;
        border-radius: 8px;
        padding: 12px;
        display: inline-block;
        animation: pulse 1.8s infinite;
      }

      /* simple highlight animation */
      @keyframes pulse {
        0% {
          background-color: #fff3cd;
        }
        50% {
          background-color: #ffecb5;
        }
        100% {
          background-color: #fff3cd;
        }
      }

      /* Winner Card */
      .winner-container {
        flex: 0 1 350px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        text-align: center;
      }

      .winner-container h3 {
        color: #444;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .winner-image {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 10px;
        border: 3px solid #28a745;
      }

      .winner-info p {
        font-size: 15px;
        margin: 6px 0;
        color: #555;
      }

      .congrats {
        margin-top: 15px;
        font-weight: 600;
        color: #28a745;
      }

      .note {
        margin-top: 10px;
        font-size: 14px;
        color: #777;
        font-style: italic;
      }

      /* üì± Mobile Responsive */
      @media (max-width: 768px) {
        .page-container {
          flex-direction: column;
          align-items: center;
        }

        .winner-container,
        .property-container {
          width: 100%;
        }

        .winner-image {
          width: 100px;
          height: 100px;
        }
      }
    </style>
  </head>
  <body>
    <h1><center>Book your Property</center></h1>

    <div class="page-container">
      <!-- Property Details -->
      <div class="property-container">
        <img src="{{ property.image.url }}" alt="{{ property.owner_name }}" />

        <p>
          <strong>üí∞ Property Value:</strong> ‚Çπ{{ property.property_value }}
        </p>
        <p><strong>üé´ Ticket Price:</strong> ‚Çπ{{ property.ticket_price }}</p>
        <p>
          <strong>üéüÔ∏èTotal Tickets:</strong> {{ property.available_tickets }}
        </p>
        <p><strong>üéüAvailable Tickets:</strong>{{ property.total_tickets }}</p>
        <p><strong>üìç Address:</strong> {{ property.address }}</p>
        <p><strong>üìù Description:</strong> {{ property.description }}</p>
        <p>
          <strong>üìç Address URL:</strong>
          <a href="{{ property.address_url }}" target="_blank" class="map-link"
            >üó∫Ô∏è View on Map</a
          >
        </p>

        <hr />
        <!-- template -->
        <a href="{% url 'lucky:buy_ticket' property.id %}" class="btn-buy"
          >BOOK A SLOT</a
        >
      </div>

      <!-- Winner Section -->
      <div class="winner-container">
        <h3>üèÜ Winner</h3>

        {% if winner %}
        <img
          src="{{ winner.image.url }}"
          alt="{{ winner.name }}"
          class="winner-image"
        />
        <div class="winner-info">
          <p><strong>Name:</strong> {{ winner.name }}</p>
          <p><strong>Property:</strong> {{ property.owner_name }}</p>
          <p><strong>Ticket ID:</strong> {{ winner.ticket_id }}</p>
          <p><strong>Property Value:</strong> ‚Çπ{{ property.property_value }}</p>
        </div>
        <p class="congrats">üéâ Congratulations from Weekdays Property Team!</p>
        {% else %}
        <p class="note">üè† Winner will be announced soon.</p>
        {% endif %}
      </div>
    </div>
  </body>
</html>
